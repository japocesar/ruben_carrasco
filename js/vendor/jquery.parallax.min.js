!function(e,t){function a(e){return this.lib[e]}function i(e){return"boolean"==typeof e?e:!!parseFloat(e)}function o(e){return f.percent.exec(e)?parseFloat(e)/100:e}function r(e,t,a,i){var o=[e,t];this.ontarget=!1,this.decay=a,this.pointer=i||[.5,.5],this.update=function(e,t){var a,i;if(this.ontarget)this.pointer=e;else if((!o[0]||c(e[0]-this.pointer[0])<t[0])&&(!o[1]||c(e[1]-this.pointer[1])<t[1]))this.ontarget=!0,this.pointer=e;else{for(a=[],i=2;i--;)o[i]&&(a[i]=e[i]+this.decay*(this.pointer[i]-e[i]));this.pointer=a}}}function n(t,a){var o,r=this,n=t instanceof e?t:e(t),s=[i(a.xparallax),i(a.yparallax)],p=0;this.pointer=[0,0],this.active=!1,this.activeOutside=a&&a.activeOutside||!1,this.update=function(e){var t=this.pos,a=this.size,i=[],r=2;if(p>0){for(2===p&&(p=0,o&&(e=o));r--;)s[r]&&(i[r]=(e[r]-t[r])/a[r],i[r]=i[r]<0?0:i[r]>1?1:i[r]);this.active=!0,this.pointer=i}else this.active=!1},this.updateSize=function(){var e=n.width(),t=n.height();r.size=[e,t],r.threshold=[1/e,1/t]},this.updatePos=function(){var e=n.offset()||{left:0,top:0},t=parseInt(n.css("borderLeftWidth"))+parseInt(n.css("paddingLeft")),a=parseInt(n.css("borderTopWidth"))+parseInt(n.css("paddingTop"));r.pos=[e.left+t,e.top+a]},e(window).bind("resize."+l,r.updateSize).bind("resize."+l,r.updatePos),n.bind("mouseenter."+l,function(){p=1}).bind("mouseleave."+l,function(e){p=2,o=[e.pageX,e.pageY]}),this.updateSize(),this.updatePos()}function s(e,a){var i=[],r=[],n=[],s=[];this.update=function(t){for(var a,o,p=[],l=2,u={};l--;)r[l]&&(p[l]=r[l]*t[l]+n[l],i[l]?(a=s[l],o=-1*p[l]):(a=100*p[l]+"%",o=p[l]*this.size[l]*-1),0===l?(u.left=a,u.marginLeft=o):(u.top=a,u.marginTop=o));e.css(u)},this.setParallax=function(e,p,l,u){for(var h=[e||a.xparallax,p||a.yparallax],c=[l||a.xorigin,u||a.yorigin],m=2;m--;)i[m]=f.px.test(h[m]),"string"==typeof c[m]&&(c[m]=c[m]===t?1:d[c[m]]||o(c[m])),i[m]?(r[m]=parseInt(h[m]),n[m]=c[m]*(this.size[m]-r[m]),s[m]=100*c[m]+"%"):(r[m]=h[m]===!0?1:o(h[m]),n[m]=r[m]?c[m]*(1-r[m]):0)},this.getPointer=function(){for(var t=e.offsetParent(),a=e.position(),o=[],s=[],p=2;p--;)o[p]=i[p]?0:a[0===p?"left":"top"]/(t[0===p?"outerWidth":"outerHeight"]()-this.size[p]),s[p]=(o[p]-n[p])/r[p];return s},this.setSize=function(t,a){this.size=[t||e.outerWidth(),a||e.outerHeight()]},this.setSize(a.width,a.height),this.setParallax(a.xparallax,a.yparallax,a.xorigin,a.yorigin)}function p(t){var a=e(this),i=t.data.global||t.data,o=t.data.local||a.data(l),r=i.port,n=i.mouse,s=o.mouse,p=i.timeStamp!==t.timeStamp;p&&(i.timeStamp=t.timeStamp,r.update(m),(r.active||!n.ontarget)&&n.update(r.pointer,r.threshold)),s?(s.update(o.freeze?o.freeze.pointer:r.pointer,r.threshold),s.ontarget&&(delete o.mouse,o.freeze&&a.unbind(h).addClass(i.freezeClass)),n=s):n.ontarget&&!r.active&&a.unbind(h),o.layer.update(n.pointer)}var l="parallax",u={mouseport:"body",xparallax:!0,yparallax:!0,xorigin:.5,yorigin:.5,decay:.66,frameDuration:30,freezeClass:"freeze"},d={left:0,top:0,middle:.5,center:.5,right:1,bottom:1},f={px:/^\d+\s?px$/,percent:/^\d+\s?%$/},h="frame."+l,c=Math.abs,m=[0,0];a.lib=d,e.fn[l]=function(a){var d=e.extend({},e.fn[l].options,a),f=arguments,c=this,m=[];if(t===e.event.special.frame)throw"jquery.parallax requires jquery.event.frame.";return d.mouseport instanceof e||(d.mouseport=e(d.mouseport)),d.port=new n(d.mouseport,d),d.mouse=new r(i(d.xparallax),i(d.yparallax),d.decay),d.mouseport.bind("mouseenter",function(){var t,a=c.length;for(d.mouse.ontarget=!1;a--;)t=c[a],e.data(t,l).freeze||e.event.add(this,h,p,{global:d,local:m[a]})}),c.each(function(a){var n=e(this),c=f[a+1]?e.extend({},d,f[a+1]):d,x=new s(n,c),g={layer:x,mouse:new r(i(c.xparallax),i(c.yparallax),c.decay,x.getPointer())};n.data(l,g),m.push(g),e.event.add(this,"freeze",function(a){var n=(e(this),a.data.global),s=a.data.local,l=s.mouse||s.freeze||n.mouse,u=u=[a.x===t?l.pointer[0]:o(a.x),a.y===t?l.pointer[1]:o(a.y)],d=a.decay;s.freeze={pointer:u},s.mouse=new r(i(n.xparallax),i(n.yparallax),n.decay,l.pointer),d!==t&&(s.mouse.decay=d),e.event.add(this,h,p,n)},{global:d,local:g}),e.event.add(this,"unfreeze",function(a){var o,n=e(this),s=a.data.global,l=a.data.local,d=a.decay;l.freeze&&(o=l.mouse?l.mouse.pointer:l.freeze.pointer,l.mouse=new r(i(s.xparallax),i(s.yparallax),s),l.mouse.pointer=o,d!==t&&(l.mouse.decay=d),delete l.freeze,n.removeClass(u.freezeClass),e.event.add(this,h,p,s))},{global:d,local:g})})},e.fn[l].options=u,e(document).ready(function(){e(document).mousemove(function(e){m=[e.pageX,e.pageY]})})}(jQuery);